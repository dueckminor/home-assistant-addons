<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="400" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .box { fill: #f0f0f0; stroke: #333; stroke-width: 2; }
      .internet { fill: #e6f3ff; stroke: #0066cc; stroke-width: 2; }
      .router { fill: #fff2e6; stroke: #ff6600; stroke-width: 2; }
      .rpi { fill: #e6ffe6; stroke: #00cc00; stroke-width: 2; }
      .device { fill: #ffe6f0; stroke: #cc0066; stroke-width: 2; }
      .text { font-family: Arial, sans-serif; font-size: 12px; fill: #333; }
      .text-small { font-family: Arial, sans-serif; font-size: 10px; fill: #333; }
      .title { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #333; }
      .ip { font-family: monospace; font-size: 11px; fill: #666; }
      .arrow { stroke: #333; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .direct-arrow { stroke: #00cc00; stroke-width: 3; fill: none; marker-end: url(#greenarrow); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
    <marker id="greenarrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#00cc00" />
    </marker>
  </defs>

  <!-- Internet -->
  <ellipse cx="70" cy="200" rx="50" ry="80" class="internet"/>
  <text x="70" y="185" text-anchor="middle" class="title">Internet</text>
  <text x="70" y="205" text-anchor="middle" class="text">External</text>
  <text x="70" y="220" text-anchor="middle" class="text">Users</text>

  <!-- Router -->
  <rect x="150" y="120" width="180" height="270" class="router" rx="5"/>
  <text x="240" y="140" text-anchor="middle" class="title">Router</text>
  
  <!-- Router IP addresses (above inner boxes) -->
  <text x="160" y="165" text-anchor="left" class="ip">IPv4-Public: 192.0.2.1</text>
  <text x="160" y="180" text-anchor="left" class="ip">IPv4-Private: 192.168.0.1</text>
  <text x="160" y="195" text-anchor="left" class="ip">IPv6: 2001:db8:1234::1</text>

  <!-- Router - Management UI -->
  <rect x="180" y="210" width="140" height="80" class="box" rx="3"/>
  <text x="190" y="225" text-anchor="left" class="text">Management UI</text>
  <text x="190" y="240" text-anchor="left" class="text-small">IPv4-Private</text>
  <text x="190" y="255" text-anchor="left" class="text-small">IPv6 from local network</text>
  <text x="190" y="280" text-anchor="left" class="ip">80,443</text>

  <rect x="160" y="300" width="140" height="80" class="box" rx="3"/>
  <text x="170" y="315" text-anchor="left" class="text">Port forwarding</text>
  <text x="170" y="330" text-anchor="left" class="text-small">IPv4-Public</text>
  <text x="170" y="345" text-anchor="left" class="text-small">IPv6 from internet</text>
  <text x="170" y="370" text-anchor="left" class="ip">53,80,443</text>

  <!-- Raspberry Pi -->
  <rect x="370" y="120" width="180" height="270" class="rpi" rx="5"/>
  <text x="460" y="140" text-anchor="middle" class="title">Raspberry Pi</text>
  
  <!-- Raspberry Pi IP address (above inner boxes) -->
  <text x="380" y="165" text-anchor="left" class="ip">IPv4-Public: N/A</text>
  <text x="380" y="180" text-anchor="left" class="ip">IPv4-Private: 192.168.0.2</text>
  <text x="380" y="195" text-anchor="left" class="ip">IPv6: 2001:db8:1234::2</text>

  <!-- Gateway -->
  <rect x="390" y="270" width="140" height="55" class="box" rx="3"/>
  <text x="400" y="285" text-anchor="left" class="text">Gateway</text>
  <text x="400" y="310" text-anchor="left" class="ip">53,80,443</text>

  <!-- Home Assistant -->
  <rect x="390" y="210" width="140" height="50" class="box" rx="3"/>
  <text x="400" y="225" text-anchor="left" class="text">Home Assistant</text>
  <text x="400" y="250" text-anchor="left" class="ip">8123</text>
  <!-- Local PC/Mac -->
  <rect x="590" y="120" width="180" height="270" class="device" rx="5"/>
  <text x="600" y="140" text-anchor="left" class="title">Local PC/Mac</text>
  <text x="600" y="165" text-anchor="left" class="ip">IPv4-Public: N/A</text>
  <text x="600" y="180" text-anchor="left" class="ip">IPv4-Private: 192.168.0.3</text>
  <text x="600" y="195" text-anchor="left" class="ip">IPv6: 2001:db8:1234::3</text>

  <!-- Arrows -->
  <!-- Internet to Router -->
  <line x1="120" y1="200" x2="150" y2="195" class="arrow"/>
  
  <!-- Router to Gateway (port forwarding) -->
  <line x1="330" y1="195" x2="370" y2="195" class="arrow"/>
  
  <!-- Gateway to Home Assistant 
  <line x1="450" y1="202" x2="460" y2="202" class="arrow"/>
  -->

  <!-- Direct connection from PC to Gateway (IPv6) -->
  <!--
  <path d="M 590 200 Q 520 120 450 202" class="direct-arrow"/>
  <text x="520" y="110" text-anchor="middle" class="text" fill="#00cc00">Direct IPv6 to Gateway</text>
  <text x="520" y="125" text-anchor="middle" class="text" fill="#00cc00">(bypasses router mgmt UI)</text>
  -->

  <!-- Legend 
  <rect x="20" y="20" width="200" height="60" fill="white" stroke="#ccc" rx="3"/>
  <text x="30" y="35" class="title">IPv6 Routing Solution</text>
  <line x1="30" y1="45" x2="50" y2="45" class="arrow"/>
  <text x="55" y="49" class="text">Internet traffic</text>
  <line x1="30" y1="60" x2="50" y2="60" class="direct-arrow"/>
  <text x="55" y="64" class="text">Local IPv6 direct</text>
  -->
</svg>